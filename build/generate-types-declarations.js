const Components = require('./components.js')
const fs = require('fs')
const render = require('json-templater/string')
const path = require('path')

const COMPONENTS_DECLARATION_PATH = path.join(__dirname, './../lib')
const MODULE_DECLARATION_TEMPLATE = `
/* Automatically generated by './build/generate-types-declarations.js' */
declare module 'maz-ui/lib/{{component_name}}';
`

const ComponentsNameArray = Object.keys(Components)

const generateDeclarationComponents = (outputPath, componentsArray) => {
  componentsArray.forEach(c => {
    const template = render(MODULE_DECLARATION_TEMPLATE, {
      component_name: c
    })

    fs.writeFileSync(`${outputPath}/${c}.d.ts`, template)
  })
}

generateDeclarationComponents(COMPONENTS_DECLARATION_PATH, ComponentsNameArray)